---
layout: post
title: Query smart contract with Web3j in Scala
---

# สวัสดี!

จากคราวก่อนที่เราเคยเขียน go เพื่อเชื่อมต่อกับ smart contract แล้ว รอบนี้เราจะมาลองใช้ฝั่ง Scala หรือ Java บ้าง ทั้งนี้ผมถนัด Scala มากกว่าเลยจะใช้ Scala สำหรับตัวอย่าง code ในครั้งนี้ ทุกวันนี้ผมมีโปรแกรมที่คอยแจ้งเตือนจำนวนเงินของ crypto currency ที่มีอยู่ เผื่อใครสนใจอยู่ลองเอาไปใช้ได้นะครับ 555 [crypto-notify](https://github.com/oat9002/crypto-notify) เมื่อไม่นานมานี้ pancakeswap ได้มีการ migrate smart contract ในการ stake cake นิดหน่อย ทำให้จากเดิมที่จะไป query ที่ bscscan ต้องเปลี่ยนไปอ่าน smart contract ตรง ๆ แทน โดยในตัวอย่างนี้จะใช้ web3j-cli ซึ่งเป็นโปรแกรมในการสร้าง contract wrapper เพื่อเราสามารถ interact กับ smart contract ได้ง่าย ๆ เรามาเริ่มกันเลยดีกว่าครับ

ป.ล. ผมใช้ linux เป็นหลักนะครับ

## โปรแกรมที่ใช้

-   [IntelliJ IDEA Community](https://www.jetbrains.com/idea/download) with Scala plugin
-   [Scala 2.x.x](https://www.scala-lang.org/download/) (ส่วนตัวใช้ 2.13.8)
-   [Java sdk](https://adoptium.net/) (ส่วนตัวใช้ openjdk-16)
-   [sbt](https://www.scala-sbt.org/download.html) (ส่วนตัวใช้ 1.6.2)
-   [web3j-cli](https://github.com/web3j/web3j-cli/releases) สำหรับสร้าง contract wrapper

## สร้าง Contract Wrapper

## สร้าง Project

-   สร้าง folder ชื่อ **web3j-example**
-   เปิด IntelliJ IDEA ขึ้นมาเเล้วสร้าง project ตามภาพนี้
    <img>
-   จะได้น่าตาประมาณนี้ รอให้ IntelliJ initialize สักพัก (สังเกตที่มุมขวาล่าง)
    <img>
-   เพิ่ม lib web3j ที่ **build.sbt**
    <img>
-   refesh sbt เพิ่มที่จะให้มัน download lib เข้ามา
